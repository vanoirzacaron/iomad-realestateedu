{"version":3,"file":"manage.min.js","sources":["../src/manage.js"],"sourcesContent":["//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @module    local_learningpath\n * @copyright 2021 Derick Turner\n * @author    Derick Turner\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/config', 'core/ajax', 'core/notification', 'core/str'], function($, mdlcfg, ajax, notification, str) {\n\n    return {\n\n        /**\n         * Function to manage actions which can be performed on the\n         * lists of courses.\n         *\n         **/\n        init: function() {\n\n            // Enable Bootstrap tooltips\n            require(['theme_boost/loader']);\n            require(['theme_boost/tooltip'], function() {\n                $('[data-toggle=\"tooltip\"]').tooltip();\n            });\n\n            /**\n             * Function to add the correct eye icon to the course listing.\n             *\n             * @param {node} icon The icon identifier\n             * @param {int} state The binary state for the icon\n             *\n             **/\n            function _redraw(icon, state) {\n                icon.removeClass('fa-eye fa-eye-slash');\n                if (state == 1) {\n                    icon.addClass('fa-eye');\n                } else {\n                    icon.addClass('fa-eye-slash');\n                }\n            }\n\n            /**\n             * Function to handle hiding an making active courses.\n             *\n             **/\n            $('.lp_active').click(function() {\n                var icon = $(this).find('i');\n                var id = $(this).data('id');\n                var state = $(this).data('state');\n\n                // flip current state\n                if (state == 0) {\n                    state = 1;\n                } else {\n                    state = 0;\n                }\n                $(this).data('state', state);\n\n                // call the web service\n                ajax.call([{\n                    methodname: 'local_iomad_learningpath_activate',\n                    args: { pathid: id, state: state },\n                    done: _redraw(icon, state),\n                    fail: notification.exception,\n                }]);\n\n                // false stops the normal link behaviour!\n                return false;\n            });\n\n            // Handle delete button\n            $('.lp_delete').click(function() {\n                var id = $(this).data('id');\n                str.get_strings([\n                    {key: 'confirm', component: 'local_iomad_learningpath'},\n                    {key: 'confirmdelete', component: 'local_iomad_learningpath'},\n                    {key: 'yes'},\n                    {key: 'no'}\n                ]).done(function(s) {\n                    notification.confirm(s[0], s[1], s[2], s[3], function() {\n                        ajax.call([{\n                            methodname: 'local_iomad_learningpath_deletepath',\n                            args: { pathid: id },\n                            done: function() {\n                                location.reload();\n                            },\n                            fail: notification.exception,\n                        }]);\n                    });\n                });\n\n                // False stops normal link behaviour!!\n                return false;\n            });\n\n            // Handle copy button\n            $('.lp_copy').click(function() {\n                var id = $(this).data('id');\n                str.get_strings([\n                    {key: 'confirm', component: 'local_iomad_learningpath'},\n                    {key: 'confirmcopy', component: 'local_iomad_learningpath'},\n                    {key: 'yes'},\n                    {key: 'no'}\n                ]).done(function(s) {\n                    notification.confirm(s[0], s[1], s[2], s[3], function() {\n                        ajax.call([{\n                            methodname: 'local_iomad_learningpath_copypath',\n                            args: { pathid: id },\n                            done: function() {\n                                location.reload();\n                            },\n                            fail: notification.exception,\n                        }]);\n                    });\n                });\n\n                // False stops normal link behaviour!!\n                return false;\n            });\n        }\n    };\n});\n"],"names":["define","$","mdlcfg","ajax","notification","str","init","_redraw","icon","state","removeClass","addClass","require","tooltip","click","this","find","id","data","call","methodname","args","pathid","done","fail","exception","get_strings","key","component","s","confirm","location","reload"],"mappings":";;;;;;AAqBAA,yCAAO,CAAC,SAAU,cAAe,YAAa,oBAAqB,aAAa,SAASC,EAAGC,OAAQC,KAAMC,aAAcC,WAE7G,CAOHC,KAAM,oBAeOC,QAAQC,KAAMC,OACnBD,KAAKE,YAAY,uBACJ,GAATD,MACAD,KAAKG,SAAS,UAEdH,KAAKG,SAAS,gBAjBtBC,QAAQ,CAAC,uBACTA,QAAQ,CAAC,wBAAwB,WAC7BX,EAAE,2BAA2BY,aAuBjCZ,EAAE,cAAca,OAAM,eACdN,KAAOP,EAAEc,MAAMC,KAAK,KACpBC,GAAKhB,EAAEc,MAAMG,KAAK,MAClBT,MAAQR,EAAEc,MAAMG,KAAK,gBAIrBT,MADS,GAATA,MACQ,EAEA,EAEZR,EAAEc,MAAMG,KAAK,QAAST,OAGtBN,KAAKgB,KAAK,CAAC,CACPC,WAAY,oCACZC,KAAM,CAAEC,OAAQL,GAAIR,MAAOA,OAC3Bc,KAAMhB,QAAQC,KAAMC,OACpBe,KAAMpB,aAAaqB,cAIhB,KAIXxB,EAAE,cAAca,OAAM,eACdG,GAAKhB,EAAEc,MAAMG,KAAK,aACtBb,IAAIqB,YAAY,CACZ,CAACC,IAAK,UAAWC,UAAW,4BAC5B,CAACD,IAAK,gBAAiBC,UAAW,4BAClC,CAACD,IAAK,OACN,CAACA,IAAK,QACPJ,MAAK,SAASM,GACbzB,aAAa0B,QAAQD,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAAI,WACzC1B,KAAKgB,KAAK,CAAC,CACPC,WAAY,sCACZC,KAAM,CAAEC,OAAQL,IAChBM,KAAM,WACFQ,SAASC,UAEbR,KAAMpB,aAAaqB,oBAMxB,KAIXxB,EAAE,YAAYa,OAAM,eACZG,GAAKhB,EAAEc,MAAMG,KAAK,aACtBb,IAAIqB,YAAY,CACZ,CAACC,IAAK,UAAWC,UAAW,4BAC5B,CAACD,IAAK,cAAeC,UAAW,4BAChC,CAACD,IAAK,OACN,CAACA,IAAK,QACPJ,MAAK,SAASM,GACbzB,aAAa0B,QAAQD,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAAI,WACzC1B,KAAKgB,KAAK,CAAC,CACPC,WAAY,oCACZC,KAAM,CAAEC,OAAQL,IAChBM,KAAM,WACFQ,SAASC,UAEbR,KAAMpB,aAAaqB,oBAMxB"}