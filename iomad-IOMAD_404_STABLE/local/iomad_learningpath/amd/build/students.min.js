/**
 * @module    local_learningpath
 * @copyright 2021 Derick Turner
 * @author    Derick Turner
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_iomad_learningpath/students",["jquery","jqueryui","core/config","core/ajax","core/notification"],(function($,jqui,mdlcfg,ajax,notification){return{init:function(companyid,pathid){function user_list(){var filter=$("#userfilter").val(),profilefieldid=$("#profilefieldid").val();ajax.call([{methodname:"local_iomad_learningpath_getprospectiveusers",args:{companyid:companyid,pathid:pathid,filter:filter,profilefieldid:profilefieldid},done:function(users){!function(users){if($("#prospectivelist li").remove(),!users.length)return $("#noprospective").show(),void $("#toomanyprospective").hide();if($("#noprospective").hide(),users.length>30)$("#toomanyprospective").show();else{$("#toomanyprospective").hide();var items=[];$.each(users,(function(id,user){items.push('<li class="text-truncate" data-userid="'+user.id+'"><i class="fa fa-user"></i> '+user.fullname+"</li>")})),$("#prospectivelist").append(items.join(""))}}(users)},fail:notification.exception}])}function pathuser_list(){ajax.call([{methodname:"local_iomad_learningpath_getusers",args:{companyid:companyid,pathid:pathid},done:function(users){!function(users){if($("#pathuserlist li").remove(),users.length){$("#nopathusers").hide();var items=[];$.each(users,(function(id,user){items.push('<li class="text-truncate" data-userid="'+user.id+'"><i class="fa fa-user"></i> '+user.fullname+"</li>")})),$("#pathuserlist").append(items.join(""))}else $("#nopathusers").show()}(users)},fail:notification.exception}])}$(window).on("load",user_list()),$("#userfilter").on("input",(function(){user_list()})),$("#profilefieldid").on("change",(function(){user_list()})),$("#prospectivelist, #pathuserlist").on("mouseenter","li",(function(){$(this).addClass("text-primary")})),$("#prospectivelist, #pathuserlist").on("mouseleave","li",(function(){$(this).removeClass("text-primary")})),$(window).on("load",pathuser_list()),$("#prospectivelist").on("click","li",(function(){var userid=$(this).data("userid");ajax.call([{methodname:"local_iomad_learningpath_addusers",args:{pathid:pathid,userids:[userid]},done:function(){pathuser_list(),user_list()},fail:notification.exception}])})),$("#pathuserlist").on("click","li",(function(){var userid=$(this).data("userid");ajax.call([{methodname:"local_iomad_learningpath_removeusers",args:{pathid:pathid,userids:[userid]},done:function(){pathuser_list(),user_list()},fail:notification.exception}])}))}}}));

//# sourceMappingURL=students.min.js.map