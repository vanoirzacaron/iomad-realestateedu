{"version":3,"file":"tab_preferences.min.js","sources":["../src/tab_preferences.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @module   block_mycourses\n * @copyright 2021 Derick Turner\n * @author    Derick Turner\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n\ndefine(['jquery', 'core/ajax', 'core/custom_interaction_events',\n    'core/notification'], function($, Ajax, CustomEvents, Notification) {\n\n    /**\n     * Registers an event that saves the user's tab preference when switching between them.\n     *\n     * @param {object} root The container element\n     */\n    var registerEventListeners = function(root) {\n        CustomEvents.define(root, [CustomEvents.events.activate]);\n        root.on(CustomEvents.events.activate, \"[data-toggle='tab']\", function(e) {\n            var tabname = $(e.currentTarget).data('tabname');\n            // Bootstrap does not change the URL when using BS tabs, so need to do this here.\n            // Also check to make sure the browser supports the history API.\n            if (typeof window.history.pushState === \"function\") {\n                window.history.pushState(null, null, '?mycoursestab=' + tabname);\n            }\n            var request = {\n                methodname: 'core_user_update_user_preferences',\n                args: {\n                    preferences: [\n                        {\n                            type: 'block_mycourses_last_tab',\n                            value: tabname\n                        }\n                    ]\n                }\n            };\n\n            Ajax.call([request])[0]\n                .fail(Notification.exception);\n        });\n    };\n\n    return {\n        registerEventListeners: registerEventListeners\n    };\n});\n"],"names":["define","$","Ajax","CustomEvents","Notification","registerEventListeners","root","events","activate","on","e","tabname","currentTarget","data","window","history","pushState","request","methodname","args","preferences","type","value","call","fail","exception"],"mappings":";;;;;;AAuBAA,yCAAO,CAAC,SAAU,YAAa,iCAC3B,sBAAsB,SAASC,EAAGC,KAAMC,aAAcC,oBAiC/C,CACHC,uBA3ByB,SAASC,MAClCH,aAAaH,OAAOM,KAAM,CAACH,aAAaI,OAAOC,WAC/CF,KAAKG,GAAGN,aAAaI,OAAOC,SAAU,uBAAuB,SAASE,OAC9DC,QAAUV,EAAES,EAAEE,eAAeC,KAAK,WAGE,mBAA7BC,OAAOC,QAAQC,WACtBF,OAAOC,QAAQC,UAAU,KAAM,KAAM,iBAAmBL,aAExDM,QAAU,CACVC,WAAY,oCACZC,KAAM,CACFC,YAAa,CACT,CACIC,KAAM,2BACNC,MAAOX,YAMvBT,KAAKqB,KAAK,CAACN,UAAU,GAChBO,KAAKpB,aAAaqB"}